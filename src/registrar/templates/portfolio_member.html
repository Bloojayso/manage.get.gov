{% extends 'portfolio_base.html' %}
{% load static field_helpers%}

{% block title %}Organization member {% endblock %}

{% load static %}

{% block portfolio_content %}
<div class="grid-row grid-gap">
    <div class="tablet:grid-col-9" id="main-content">

        {% block messages %}
            {% include "includes/form_messages.html" %}
        {% endblock %}

        <h1>Manage member</h1>
        
        <p>
          {% if member %}
            {{ member.email }}
          {% elif invitation %}
            {{ invitation.email }}
          {% endif %}
        </p>

        <p>Last active: 
          {% if member and member.last_login %}
            {{ member.last_login }}
          {% elif invitation %}
            Invited
          {% else %}
            --
          {% endif %}
        </p>

        <p>Full name:
          {% if member %}
            {% if member.first_name or member.last_name %}
              {{ member.get_formatted_name }}
            {% else %}
              --
            {% endif %}
          {% else %}
            --
          {% endif %}
        </p>

        <p>Title or organization role:
          {% if member and member.title %}
            {{ member.title }}
          {% else %}
            --
          {% endif %}
        </p>
      


        <hr>

        <form class="usa-form usa-form--large" method="post" novalidate>
            {% csrf_token %}
            {% if form.roles %}
              {% input_with_errors form.roles %}
              {% input_with_errors form.additional_permissions %}
            {% elif form.portfolio_roles %}
              {% input_with_errors form.portfolio_roles %}
              {% input_with_errors form.portfolio_additional_permissions %}
            {% endif %}
            <button
              type="submit"
              class="usa-button"
            >Submit</button>
          </form>

        

    </div>
</div>
{% endblock %}
