{% extends 'base.html' %}

{% block title %}
Edit your User Profile |
{% endblock title %}
{% load static url_helpers %}

{% block content %}
<main id="main-content" class="grid-container">
  <div class="grid-col desktop:grid-offset-2 desktop:grid-col-8">
    {% if messages %}
    {% for message in messages %}
    <div class="usa-alert usa-alert--{{ message.tags }} usa-alert--slim margin-bottom-3">
        <div class="usa-alert__body">
        {{ message }}
        </div>
    </div>
    {% endfor %}
    {% endif %}
    {% include "includes/form_errors.html" with form=form %}

    {% if show_back_button %}
      <a href="{% if not return_to_request %}{% url 'home' %}{% else %}{% url 'domain-request:' %}{% endif %}" class="breadcrumb__back">
        <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
        <use xlink:href="{% static 'img/sprite.svg' %}#arrow_back"></use>
        </svg>
        {% if not return_to_request %}
        <p class="margin-left-05 margin-top-0 margin-bottom-0 line-height-sans-1">
          {{ profile_back_button_text }}
        </p>
        {% else %}
        <p class="margin-left-05 margin-top-0 margin-bottom-0 line-height-sans-1">
          Go back to your domain request
        </p>
        {% endif %}
      </a>
    {% endif %}
    
    {% if show_confirmation_modal %}
    <div class="usa-modal__content">
      <div class="usa-modal__main">
          <h2 class="usa-modal__heading" id="modal-1-heading">
              {{ modal_heading }}
              {% if heading_value is not None %}
              {# Add a breakpoint #}
              <div aria-hidden="true"></div>
              {{ heading_value }}
              {% endif %}
          </h2>
          <div class="usa-prose">
              <p id="modal-1-description">
                  {{ modal_description }}
              </p>
          </div>
  
          <div class="usa-modal__footer">
              <ul class="usa-button-group">
                  {% if not_form %}
                  <li class="usa-button-group__item">
                          {{ modal_button }}
                  </li>      
                  {% else %}
                      <li class="usa-button-group__item">
                          <form method="post">
                              {% csrf_token %}
                              {{ modal_button }}
                          </form>
                      </li>
                  {% endif %}
                  <li class="usa-button-group__item">
                      {% comment %} The cancel button the DS form actually triggers a context change in the view,
                      in addition to being a close modal hook {% endcomment %}
                      {% if cancel_button_resets_ds_form %}
                          <form method="post">
                              {% csrf_token %}
                              <button
                                  type="submit"
                                  class="usa-button usa-button--unstyled padding-105 text-center"
                                  name="btn-cancel-click"
                                  data-close-modal
                              >
                                  Cancel
                              </button>
                          </form>
                      {% elif not is_domain_request_form or review_form_is_complete %}
                          <button
                              type="button"
                              class="usa-button usa-button--unstyled padding-105 text-center"
                              data-close-modal
                          >
                              Cancel
                          </button>
                      {% endif %}
                  </li>
              </ul>
          </div>
      </div>
    </div>
    {% endif %}

{% endblock content %}

{% block content_bottom %}
  {% include "includes/profile_form.html" with form=form %}
  </div>
</main>
{% endblock content_bottom %}
