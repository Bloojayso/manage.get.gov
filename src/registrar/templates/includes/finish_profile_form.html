{% extends 'includes/profile_form.html' %}

{% load static url_helpers %}
{% load field_helpers %}

{% block profile_header %}
<h1>Finish setting up your profile</h1>
{% endblock profile_header %}

{% block profile_blurb %}
<p>
    We <a class="usa-link" href="{% public_site_url 'domains/requirements/#what-.gov-domain-registrants-must-do' %}"  target="_blank">require</a> 
    that you maintain accurate contact information.
    The details you provide will only be used to support the administration of .gov and won’t be made public. 
</p>

<h2>What contact information should we use to reach you?</h2>
<p>
    Review the details below and update any required information. 
    Note that editing this information won’t affect your Login.gov account information.
</p>

{# We use a var called 'remove_margin_top' rather than 'add_margin_top' because this is more useful as a default #}
{% include "includes/required_fields.html" with remove_margin_top=True %}

{% endblock profile_blurb %}

{% block profile_form %}
<form id="finish-profile-setup-form" class="usa-form usa-form--largest" method="post" novalidate>
    {% csrf_token %}
    <fieldset class="usa-fieldset">
        <legend class="usa-sr-only">
            Your contact information
        </legend>

        {% with show_edit_button=True show_readonly=True group_classes="usa-form-readonly usa-form-readonly--no-border padding-top-2" %}
            {% input_with_errors form.full_name %}
        {% endwith %}
        
        <div id="profile-name-fieldset" class="display-none" role="group">
            {% with group_classes="usa-form-readonly usa-form-readonly--no-border padding-top-2" %}
                {% input_with_errors form.first_name %}
            {% endwith %}
            
            {% with  group_classes="usa-form-readonly padding-top-2" %}
                {% input_with_errors form.middle_name %}
            {% endwith %}
            
            {% with  group_classes="usa-form-readonly padding-top-2" %}
                {% input_with_errors form.last_name %}
            {% endwith %}
        </div>

        {% public_site_url "help/account-management/#get-help-with-login.gov" as login_help_url %}
        {% with link_href=login_help_url show_readonly=True group_classes="usa-form-readonly padding-top-2 bold-usa-label" add_class="display-none"%}
            {% with sublabel_text="We recommend using your work email for your .gov account. If the wrong email is displayed below, you’ll need to update your Login.gov account and log back in. Get help with your Login.gov account." %}
                {% with link_text="Get help with your Login.gov account" target_blank=True do_not_show_max_chars=True %}
                    {% input_with_errors form.email %}
                {% endwith %}
            {% endwith %}
        {% endwith %}

        {% with show_edit_button=True show_readonly=True group_classes="usa-form-readonly padding-top-2" %}
            {% input_with_errors form.title %}
        {% endwith %}

        {% with show_edit_button=True show_readonly=True group_classes="usa-form-readonly padding-top-2" %}
            {% with add_class="usa-input--medium" %}
                {% input_with_errors form.phone %}
            {% endwith %}
        {% endwith %}

    </fieldset>
    <div>

        <button type="submit" name="contact_setup_save_button" class="usa-button ">
            Save
        </button>
        {% if confirm_changes and going_to_specific_page %}
            <button type="submit" name="contact_setup_submit_button" class="usa-button usa-button--outline">
                {{redirect_button_text }}
            </button>
        {% endif %}
    </div>
</form>

{% endblock profile_form %}
